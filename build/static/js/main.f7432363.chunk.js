(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{40:function(e,n,t){},41:function(e,n,t){"use strict";t.r(n);var r=t(16),o=t.n(r),c=t(3),u=t(2),i=t(0),a=function(e){var n=e.filter,t=e.filterHandler;return Object(i.jsxs)("div",{children:["Name filter:",Object(i.jsx)("input",{value:n,onChange:t})]})},s=function(e){var n=e.submitHandler,t=e.name,r=e.nameChange,o=e.number,c=e.numberChange;return Object(i.jsxs)("form",{onSubmit:n,children:[Object(i.jsxs)("div",{children:["Name: ",Object(i.jsx)("input",{value:t,onChange:r})," "]}),Object(i.jsxs)("div",{children:["Number: ",Object(i.jsx)("input",{value:o,onChange:c})," "]}),Object(i.jsxs)("div",{children:[" ",Object(i.jsx)("button",{type:"submit",children:"Add"})," "]})]})},l=function(e){var n=e.persons,t=e.removePerson;return Object(i.jsx)("ul",{className:"persons",children:n.map((function(e){return Object(i.jsx)(f,{person:e,removePerson:function(){return t(e.id)}},e.id)}))})},f=function(e){var n=e.person,t=e.removePerson;return Object(i.jsxs)("li",{children:[n.name," ",n.number," ",Object(i.jsx)("button",{onClick:t,children:"Remove"})]})},d=t(4),m=t.n(d),b="/api/persons",j={getAll:function(){return m.a.get(b).then((function(e){return e.data}))},create:function(e){return m.a.post(b,e).then((function(e){return e.data}))},update:function(e,n){return m.a.put("".concat(b,"/").concat(e),n).then((function(e){return e.data}))},remove:function(e){return m.a.delete("".concat(b,"/").concat(e)).then((function(e){return e}))}},h=function(){var e=Object(u.useState)([]),n=Object(c.a)(e,2),t=n[0],r=n[1],o=Object(u.useState)(""),f=Object(c.a)(o,2),d=f[0],m=f[1],b=Object(u.useState)(""),h=Object(c.a)(b,2),O=h[0],v=h[1],p=Object(u.useState)(null),x=Object(c.a)(p,2),g=x[0],w=x[1],C=Object(u.useState)(null),k=Object(c.a)(C,2),N=k[0],S=k[1],y=Object(u.useState)(""),P=Object(c.a)(y,2),T=P[0],A=P[1],H=0===T.length?t:t.filter((function(e){return e.name.toLowerCase().includes(T.toLowerCase())}));Object(u.useEffect)((function(){j.getAll().then((function(e){r(e)}))}),[]);var R=function(e){var n=t.find((function(e){return e.name===d}));j.update(n.id,e).then((function(e){r(t.map((function(t){return n.id!==t.id?t:e}))),w("Updated ".concat(d,"'s number")),setTimeout((function(){w(null)}),3e3),I()})).catch((function(e){S("Information of ".concat(n.name," has already been removed from the server")),setTimeout((function(){S(null)}),3e3),r(t.filter((function(e){return e.name!==n.name})))}))},E=function(e){var n=e.notification,t=e.errorMessage;return null!==n?Object(i.jsx)("div",{className:"notification",children:n}):null!==t?Object(i.jsx)("div",{className:"error",children:t}):null},I=function(){m(""),v("")};return Object(i.jsxs)("div",{children:[Object(i.jsx)("h2",{children:"Phonebook"}),Object(i.jsx)(E,{notification:g,errorMessage:N}),Object(i.jsx)(a,{filter:T,filterHandler:function(e){A(e.target.value)}}),Object(i.jsx)("h3",{children:"Add a new entry"}),Object(i.jsx)(s,{submitHandler:function(e){e.preventDefault();var n={name:d,number:O};0===d.length||0===O.length?(S("Please fill both entry form fields"),setTimeout((function(){S(null)}),3e3)):t.some((function(e){return e.name===d}))?window.confirm("".concat(d," is already added to phonebook. Replace the old number with a new one?"))?R(n):I():j.create(n).then((function(e){r(t.concat(e)),w("Added ".concat(d," to phonebook")),setTimeout((function(){w(null)}),3e3),I()})).catch((function(e){S("".concat(e.response.data.error)),setTimeout((function(){S(null)}),8e3)}))},name:d,nameChange:function(e){m(e.target.value)},number:O,numberChange:function(e){v(e.target.value)}}),Object(i.jsx)("h3",{children:"Numbers"}),Object(i.jsx)(l,{persons:H,removePerson:function(e){var n=t.find((function(n){return n.id===e}));window.confirm("Remove ".concat(n.name," from phonebook?"))&&j.remove(e).then((function(){r(t.filter((function(n){return n.id!==e}))),w("Removed ".concat(n.name," from phonebook")),setTimeout((function(){w(null)}),3e3)})).catch((function(e){r(t.filter((function(e){return e.name!==n.name})))}))}})]})};t(40);o.a.render(Object(i.jsx)(h,{}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.f7432363.chunk.js.map